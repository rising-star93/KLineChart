/**
 * @license
 * KLineChart v6.1.0
 * Copyright (c) 2019 lihu.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){a=Math.max(e.high,a),t=Math.min(e.low,t)})),{hn:a,ln:t}}({technicalIndicatorExtensions:{},markExtensions:{},addTechnicalIndicator:function(e){var a=this;[].concat(e).forEach((function(e){e.name&&(a.technicalIndicatorExtensions[e.name]=e)}))},addMark:function(e){var a=this;[].concat(e).forEach((function(e){e.name&&(a.markExtensions[e.name]=e)}))}}).addTechnicalIndicator([{name:"AVP",series:"price",precision:2,plots:[{key:"avp",title:"AVP",type:"line"}],calcTechnicalIndicator:function(e){var a=0,t=0;return e.map((function(e){var n={};return a+=e.turnover||0,0!==(t+=e.volume||0)&&(n.avp=a/t),n}))}},{name:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldCheckParamCount:!0,shouldOhlc:!0,plots:[{key:"bbi",title:"BBI",type:"line"}],calcTechnicalIndicator:function(e,a){var t=Math.max.apply(null,a),n=[],c=[];return e.map((function(r,i){var l={},o=r.close;if(a.forEach((function(a,t){n[t]=(n[t]||0)+o,a-1>i||(c[t]=n[t]/a,n[t]-=e[i-(a-1)].close)})),i>=t-1){var u=0;c.forEach((function(e){u+=e})),l.bbi=u/4}return l}))}},{name:"DMA",calcParams:[10,50,10],plots:[{key:"dma",title:"DMA",type:"line"},{key:"ama",title:"AMA",type:"line"}],calcTechnicalIndicator:function(e,a){var t=Math.max(a[0],a[1]),n=0,c=0,r=0,i=[];return e.forEach((function(l,o){var u,s,h={},m=l.close;if(n+=m,c+=m,a[0]-1>o||(u=n/a[0],n-=e[o-(a[0]-1)].close),a[1]-1>o||(s=c/a[1],c-=e[o-(a[1]-1)].close),o>=t-1){var p=u-s;h.dma=p,r+=p,t+a[2]-2>o||(h.ama=r/a[2],r-=i[o-(a[2]-1)].dma)}i.push(h)})),i}},{name:"DMI",calcParams:[14,6],plots:[{key:"pdi",title:"PDI",type:"line"},{key:"mdi",title:"MDI",type:"line"},{key:"adx",title:"ADX",type:"line"},{key:"adxr",title:"ADXR",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=[],c=0,r=[],i=0,l=[],o=0,u=[],s=[];return e.forEach((function(h,m){var p={};if(m>0){var y=e[m-1].close,f=h.high,v=h.low,d=f-v,k=Math.abs(f-y),M=Math.abs(v-y),I=f-e[m-1].high,A=e[m-1].low-v,P=Math.max(Math.max(d,k),M);t+=P,n.push(P);var C=I>0&&I>A?I:0;c+=C,r.push(C);var b=A>0&&A>I?A:0;if(i+=b,l.push(b),m>=a[0]){var E,T,D;if(0===t?(E=0,T=0):(E=100*c/t,T=100*i/t),o+=D=T+E===0?0:Math.abs(T-E)/(T+E)*100,u.push(D),p.pdi=E,p.mdi=T,m>=a[0]+a[1]-1){var g=o/a[1];p.adx=g,a[0]+2*a[1]-2>m||(p.adxr=(g+s[m-(a[1]-1)].adx)/2),o-=u[m-(a[0]+a[1]-1)]}t-=n[m-a[0]],c-=r[m-a[0]],i-=l[m-a[0]]}}s.push(p)})),s}},{name:"EMV",calcParams:[14,9],plots:[{key:"emv",title:"EMV",type:"line"},{key:"maEmv",title:"MAEMV",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=0,c=[],r=[];return e.forEach((function(i,l){var o={};if(l>0){var u=i.high,s=i.low,h=((u+s)/2-(e[l-1].high+e[l-1].low)/2)*(u-s)-(i.turnover||0);c.push(h),t+=h,a[0]>l||(o.emv=t/a[0],n+=o.emv,a[0]+a[1]-1>l||(o.maEmv=n/a[1],n-=r[l-(a[1]-1)].emv),t-=c[l-a[0]])}r.push(o)})),r}},{name:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ema6",title:"EMA6",type:"line"},{key:"ema12",title:"EMA12",type:"line"},{key:"ema20",title:"EMA20",type:"line"}],regeneratePlots:function(e){return e.map((function(e){return{key:"ema".concat(e),title:"EMA".concat(e),type:"line"}}))},calcTechnicalIndicator:function(e,a,t){var n=[];return e.map((function(e,c){var r={},i=e.close;return a.forEach((function(e,a){var l;r[t[a].key]=l=0===c?i:(2*i+(e-1)*n[a])/(e+1),n[a]=l})),r}))}},{name:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ma5",title:"MA5",type:"line"},{key:"ma10",title:"MA10",type:"line"},{key:"ma30",title:"MA30",type:"line"},{key:"ma60",title:"MA60",type:"line"}],regeneratePlots:function(e){return e.map((function(e){return{key:"ma".concat(e),title:"MA".concat(e),type:"line"}}))},calcTechnicalIndicator:function(e,a,t){var n=[];return e.map((function(c,r){var i={},l=c.close;return a.forEach((function(a,c){n[c]=(n[c]||0)+l,a-1>r||(i[t[c].key]=n[c]/a,n[c]-=e[r-(a-1)].close)})),i}))}},{name:"MACD",calcParams:[12,26,9],baseValue:0,plots:[{key:"diff",title:"DIFF",type:"line"},{key:"dea",title:"DEA",type:"line"},{key:"macd",title:"MACD",type:"bar",color:function(e,a){var t=(e.currentData.technicalIndicatorData||{}).macd;return t>0?a.bar.upColor:0>t?a.bar.downColor:a.bar.noChangeColor},isStroke:function(e){return(e.currentData.technicalIndicatorData||{}).macd>(e.preData.technicalIndicatorData||{}).macd}}],calcTechnicalIndicator:function(e,a){var t,n,c=0,r=0,i=0,l=0;return e.map((function(e,o){var u=e.close;0===o?(t=u,n=u):(t=(2*u+(a[0]-1)*c)/(a[0]+1),n=(2*u+(a[1]-1)*r)/(a[1]+1));var s=t-n;return c=t,r=n,l=i=(2*s+l*(a[2]-1))/(a[2]+1),{diff:s,dea:i,macd:2*(s-i)}}))}},{name:"SMA",calcParams:[12,2],series:"price",precision:2,plots:[{key:"sma",title:"SMA",type:"line"}],shouldCheckParamCount:!0,shouldOhlc:!0,calcTechnicalIndicator:function(e,a){var t=0;return e.map((function(e,n){var c={},r=e.close;return c.sma=0===n?r:(r*a[1]+t*(a[0]-a[1]+1))/(a[0]+1),t=c.sma,c}))}},{name:"TRIX",calcParams:[12,20],plots:[{key:"trix",title:"TRIX",type:"line"},{key:"maTrix",title:"MATRIX",type:"line"}],calcTechnicalIndicator:function(e,a){var t,n,c,r,i,l,o=0,u=[];return e.forEach((function(e,s){var h={},m=e.close;0===s?(t=m,n=m,c=m):(c=(2*(n=(2*(t=(2*m+(a[0]-1)*r)/(a[0]+1))+(a[0]-1)*i)/(a[0]+1))+(a[0]-1)*l)/(a[0]+1),h.trix=0===l?0:(c-l)/l*100,o+=h.trix,a[1]-1>s||(h.maTrix=o/a[1],o-=u[s-(a[1]-1)].trix||0)),r=t,i=n,l=c,u.push(h)})),u}},{name:"BRAR",calcParams:[26],plots:[{key:"br",title:"BR",type:"line"},{key:"ar",title:"AR",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=0,c=0,r=0;return e.map((function(i,l){var o={};if(l>0){var u=i.high,s=i.low,h=i.open,m=e[l-1].close;if(c+=u-h,r+=h-s,t+=u-m,n+=m-s,l>=a[0]){o.ar=0!==r?c/r*100:0,o.br=0!==n?t/n*100:0;var p=e[l-(a[0]-1)].high,y=e[l-(a[0]-1)].low,f=e[l-(a[0]-1)].open,v=e[l-a[0]].close;t-=p-v,n-=v-y,c-=p-f,r-=f-y}}return o}))}},{name:"CR",calcParams:[26,10,20,40,60],plots:[{key:"cr",title:"CR",type:"line"},{key:"ma1",title:"MA1",type:"line"},{key:"ma2",title:"MA2",type:"line"},{key:"ma3",title:"MA3",type:"line"},{key:"ma4",title:"MA4",type:"line"}],calcTechnicalIndicator:function(e,a){var t=Math.ceil(a[1]/2.5+1),n=Math.ceil(a[2]/2.5+1),c=Math.ceil(a[3]/2.5+1),r=Math.ceil(a[4]/2.5+1),i=0,l=[],o=0,u=[],s=0,h=[],m=0,p=[],y=[];return e.forEach((function(f,v){var d={};if(v>0){var k=e[v-1],M=(k.high+k.close+k.low+k.open)/4,I=Math.max(0,f.high-M),A=Math.max(0,M-f.low);if(v>=a[0]){d.cr=0!==A?I/A*100:0;i+=d.cr,o+=d.cr,s+=d.cr,m+=d.cr,a[0]+a[1]-1>v||(l.push(i/a[1]),a[0]+a[1]+t-2>v||(d.ma1=l[l.length-1-t]),i-=y[v-(a[1]-1)].cr),a[0]+a[2]-1>v||(u.push(o/a[2]),a[0]+a[2]+n-2>v||(d.ma2=u[u.length-1-n]),o-=y[v-(a[2]-1)].cr),a[0]+a[3]-1>v||(h.push(s/a[3]),a[0]+a[3]+c-2>v||(d.ma3=h[h.length-1-c]),s-=y[v-(a[3]-1)].cr),a[0]+a[4]-1>v||(p.push(m/a[4]),a[0]+a[4]+r-2>v||(d.ma4=p[p.length-1-r]),m-=y[v-(a[4]-1)].cr)}}y.push(d)})),y}},{name:"MTM",calcParams:[6,10],plots:[{key:"mtm",title:"MTM",type:"line"},{key:"maMtm",title:"MAMTM",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=[];return e.forEach((function(c,r){var i={};r<a[0]-1||(i.mtm=c.close-e[r-(a[0]-1)].close,t+=i.mtm,a[0]+a[1]-2>r||(i.maMtm=t/a[1],t-=n[r-(a[1]-1)].mtm));n.push(i)})),n}},{name:"PSY",calcParams:[12,6],plots:[{key:"psy",title:"PSY",type:"line"},{key:"maPsy",title:"MAPSY",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=0,c=[],r=[];return e.forEach((function(e,i){var l={},o=e.close-e.open>0?1:0;c.push(o),t+=o,a[0]-1>i||(l.psy=t/a[0]*100,n+=l.psy,a[0]+a[1]-2>i||(l.maPsy=n/a[1],n-=r[i-(a[1]-1)].psy),t-=c[i-(a[0]-1)]),r.push(l)})),r}},{name:"ROC",calcParams:[12,6],shouldCheckParamCount:!0,plots:[{key:"roc",title:"ROC",type:"line"},{key:"maRoc",title:"MAROC",type:"line"}],calcTechnicalIndicator:function(e,a){var t=[],n=0;return e.forEach((function(c,r){var i={};if(r>=a[0]-1){var l=e[r-(a[0]-1)].close;i.roc=0!==l?(c.close-l)/l:0,n+=i.roc,a[0]-1+a[1]-1>r||(i.maRoc=n/a[1],n-=t[r-(a[1]-1)].roc)}t.push(i)})),t}},{name:"VR",calcParams:[24,30],plots:[{key:"vr",title:"VR",type:"line"},{key:"maVr",title:"MAVR",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=0,c=0,r=0,i=[];return e.forEach((function(l,o){var u={},s=l.close,h=l.open,m=l.volume;if(s>h?t+=m:h>s?n+=m:c+=m,o>=a[0]-1){var p=c/2;u.vr=n+p===0?0:(t+p)/(n+p),r+=u.vr,a[0]+a[1]-2>o||(u.maVr=r/a[1],r-=i[o-(a[1]-1)].vr);var y=e[o-(a[0]-1)],f=y.open,v=y.close,d=y.volume;v>f?t-=d:f>v?n-=d:c-=d}i.push(u)})),i}},{name:"AO",calcParams:[5,34],shouldCheckParamCount:!0,plots:[{key:"ao",title:"AO",type:"bar",color:function(e,a){return(e.currentData.technicalIndicatorData||{}).ao>(e.preData.technicalIndicatorData||{}).ao?a.bar.upColor:a.bar.downColor},isStroke:function(e){return(e.currentData.technicalIndicatorData||{}).ao>(e.preData.technicalIndicatorData||{}).ao}}],baseValue:0,calcTechnicalIndicator:function(e,a){var t=Math.max(a[0],a[1]),n=0,c=0,r=0,i=0;return e.map((function(l,o){var u={},s=(l.low+l.high)/2;if(n+=s,c+=s,o>=a[0]-1){r=n/a[0];var h=e[o-(a[0]-1)];n-=(h.low+h.high)/2}if(o>=a[1]-1){i=c/a[1];var m=e[o-(a[1]-1)];c-=(m.low+m.high)/2}return t-1>o||(u.ao=r-i),u}))}},{name:"BIAS",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"bias6",title:"BIAS6",type:"line"},{key:"bias12",title:"BIAS12",type:"line"},{key:"bias24",title:"BIAS24",type:"line"}],regeneratePlots:function(e){return e.map((function(e){return{key:"bias".concat(e),title:"BIAS".concat(e),type:"line"}}))},calcTechnicalIndicator:function(e,a,t){var n=[];return e.map((function(c,r){var i={},l=c.close;return a.forEach((function(c,o){if(n[o]=(n[o]||0)+l,r>=c-1){var u=n[o]/a[o];i[t[o].key]=(l-u)/u*100,n[o]-=e[r-(c-1)].close}})),i}))}},{name:"CCI",calcParams:[13],plots:[{key:"cci",title:"CCI",type:"line"}],calcTechnicalIndicator:function(e,a){var t,n=a[0]-1,c=0,r=0,i=[];return e.map((function(l,o){var u,s={},h=l.close;if(c+=h,i.push(u=n>o?c/(o+1):c/a[0]),r+=Math.abs(u-h),o>=n){s.cci=0!==(t=r/a[0])?((l.high+l.low+h)/3-u)/t/.015:0;var m=e[o-n].close;c-=m,r-=Math.abs(i[o-n]-m)}return s}))}},{name:"RSI",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"rsi6",title:"RSI6",type:"line"},{key:"rsi12",title:"RSI12",type:"line"},{key:"rsi24",title:"RSI24",type:"line"}],calcTechnicalIndicator:function(e,a,t){var n=[],c=[];return e.map((function(r,i){var l={},o=r.open;return a.forEach((function(a,u){var s=(r.close-o)/o;if(n[u]=n[u]||0,c[u]=c[u]||0,s>0?n[u]=n[u]+s:c[u]=c[u]+Math.abs(s),i>=a-1){var h=(n[u]+c[u])/a;l[t[u].key]=0===h?0:n[u]/a/h*100;var m=e[i-(a-1)],p=m.open,y=(m.close-p)/p;y>0?n[u]-=y:c[u]-=Math.abs(y)}})),l}))}},{name:"KDJ",calcParams:[9,3,3],plots:[{key:"k",title:"K",type:"line"},{key:"d",title:"D",type:"line"},{key:"j",title:"J",type:"line"}],calcTechnicalIndicator:function(a,t){var n=[];return a.forEach((function(c,r){var i={},l=c.close;if(r>=t[0]-1){var o=e(a.slice(r-(t[0]-1),r+1)),u=o.ln,s=o.hn-u;i.k=((t[1]-1)*(n[r-1].k||50)+(l-u)/(0===s?1:s)*100)/t[1],i.d=((t[2]-1)*(n[r-1].d||50)+i.k)/t[2],i.j=3*i.k-2*i.d}n.push(i)})),n}},{name:"WR",calcParams:[6,10,14],shouldCheckParamCount:!1,plots:[{key:"wr1",title:"WR1",type:"line"},{key:"wr2",title:"WR2",type:"line"},{key:"wr3",title:"WR3",type:"line"}],regeneratePlots:function(e){return e.map((function(e,a){return{key:"wr".concat(a+1),title:"WR".concat(a+1),type:"line"}}))},calcTechnicalIndicator:function(a,t,n){return a.map((function(c,r){var i={},l=c.close;return t.forEach((function(t,c){var o=t-1;if(r>=o){var u=e(a.slice(r-o,r+1)),s=u.hn,h=s-u.ln;i[n[c].key]=0===h?0:(s-l)/h*100}})),i}))}},{name:"BOLL",series:"price",calcParams:[20],precision:2,shouldOhlc:!0,plots:[{key:"up",title:"UP",type:"line"},{key:"mid",title:"MID",type:"line"},{key:"dn",title:"DN",type:"line"}],calcTechnicalIndicator:function(e,a){var t=a[0]-1,n=0;return e.map((function(c,r){var i={};if(n+=c.close,r>=t){i.mid=n/a[0];var l=function(e,a){var t=e.length,n=0;e.forEach((function(e){var t=e.close-a;n+=t*t}));var c=n>0,r=Math.sqrt((n=Math.abs(n))/t);return c?r:-1*r}(e.slice(r-t,r+1),i.mid);i.up=i.mid+2*l,i.dn=i.mid-2*l,n-=e[r-t].close}return i}))}},{name:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,plots:[{key:"sar",title:"SAR",type:"circle",color:function(e,a){var t=e.currentData,n=t.kLineData||{};return(n.high+n.low)/2>(t.technicalIndicatorData||{}).sar?a.circle.upColor:a.circle.downColor}}],calcTechnicalIndicator:function(e,a){var t=a[0]/100,n=a[1]/100,c=a[2]/100,r=t,i=-100,l=!1,o=0;return e.map((function(a,u){var s=o,h=a.high,m=a.low;if(l){(-100===i||h>i)&&(i=h,r=Math.min(r+n,c)),o=s+r*(i-s);var p=Math.min(e[Math.max(1,u)-1].low,m);o>a.low?(o=i,r=t,i=-100,l=!l):o>p&&(o=p)}else{(-100===i||i>m)&&(i=m,r=Math.min(r+n,c)),o=s+r*(i-s);var y=Math.max(e[Math.max(1,u)-1].high,h);a.high>o?(o=i,r=0,i=-100,l=!l):y>o&&(o=y)}return{sar:o}}))}},{name:"OBV",calcParams:[30],plots:[{key:"obv",title:"OBV",type:"line"},{key:"maObv",title:"MAOBV",type:"line"}],calcTechnicalIndicator:function(e,a){var t=0,n=[];return e.forEach((function(e,c){var r={},i=e.close,l=e.high-i;r.obv=0===l?0:(i-e.low-l)/l*e.volume,t+=r.obv,a[0]-1>c||(r.maObv=t/a[0],t-=n[c-(a[0]-1)].obv),n.push(r)})),n}},{name:"PVT",plots:[{key:"pvt",title:"PVT",type:"line"}],calcTechnicalIndicator:function(e){var a=0;return e.map((function(t,n){var c={};if(n>0){var r=e[n-1].close,i=0;0!==r&&(i=(t.close-r)/r*t.volume),c.pvt=a+=i}return c}))}},{name:"VOL",series:"volume",calcParams:[5,10,20],shouldCheckParamCount:!1,shouldFormatBigNumber:!0,precision:0,baseValue:0,minValue:0,plots:[{key:"ma5",title:"MA5",type:"line"},{key:"ma10",title:"MA10",type:"line"},{key:"ma20",title:"MA20",type:"line"},{key:"volume",type:"bar",color:function(e,a){var t=e.currentData.kLineData||{};return t.close>t.open?a.bar.upColor:t.open>t.close?a.bar.downColor:a.bar.noChangeColor}}],regeneratePlots:function(e){var a=e.map((function(e){return{key:"ma".concat(e),title:"MA".concat(e),type:"line"}}));return a.push({key:"volume",type:"bar",color:function(e,a){var t=e.currentData.kLineData||{};return t.close>t.open?a.bar.upColor:t.open>t.close?a.bar.downColor:a.bar.noChangeColor}}),a},calcTechnicalIndicator:function(e,a,t){var n=[];return e.map((function(c,r){var i=c.volume||0,l={volume:i};return a.forEach((function(a,c){n[c]=(n[c]||0)+i,a-1>r||(l[t[c].key]=n[c]/a,n[c]-=e[r-(a-1)].volume)})),l}))}}])}));
